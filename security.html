<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Security — Setfeed</title>
  <meta name="description" content="Setfeed security model, encryption boundaries, and responsible disclosure policy." />

  <meta name="theme-color" content="#FFFBFE" id="meta-theme-color" />

  <link rel="icon" href="./favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="./favicon-32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="./favicon-16.png" sizes="16x16">
  <link rel="apple-touch-icon" href="./apple-touch-icon.png" sizes="180x180">

  <link rel="stylesheet" href="./styles.css" />

  <script>
    (function(){
      const themeKey = "sf_theme_mode"; // "system" | "light" | "dark"
      const stored = localStorage.getItem(themeKey) || "system";
      const root = document.documentElement;

      if (stored === "light" || stored === "dark") root.setAttribute("data-theme", stored);
      else root.removeAttribute("data-theme");

      const effective =
        root.getAttribute("data-theme") ||
        (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");

      const meta = document.getElementById("meta-theme-color");
      if (meta) meta.content = (effective === "dark") ? "#0F1114" : "#FFFBFE";

      function applyAuthVisibility(){
        const authed = localStorage.getItem("sf_signed_authed") === "true";
        document.querySelectorAll(".auth-only").forEach(el => {
          el.classList.toggle("hidden", !authed);
        });
      }

      document.addEventListener("DOMContentLoaded", applyAuthVisibility);

      window.addEventListener("storage", (e) => {
        if (e && e.key === "sf_signed_authed") applyAuthVisibility();
      });
    })();
  </script>
</head>

<body class="page-bg">
  <header class="site-header">
    <div class="header-inner">
      <a class="brand-mark" href="./" aria-label="Setfeed home">
        <img class="logo" src="./logo.png" alt="" aria-hidden="true" />
      </a>

      <a class="brand-title" href="./">Setfeed</a>

      <nav class="nav" aria-label="Primary">
        <a href="./">Home</a>
        <a href="./send.html">Send</a>
        <a href="./receive.html">Receive</a>
        <a class="auth-only hidden" href="./inbox.html">Inbox</a>
        <a href="./security.html" aria-current="page">Security</a>
        <a href="./privacy.html">Privacy</a>
        <a class="nav-cta" href="#" aria-label="Download Setfeed app">Download app</a>
      </nav>
    </div>
  </header>

  <div class="wrap">
    <div class="card">
      <h1>Security</h1>
      <p class="lead">Effective date: <strong>2026-02-15</strong></p>

      <p>
        This page explains Setfeed’s security model, encryption boundaries, and operational safeguards.
        Our approach is simple: encrypt early, minimize data, and reduce server trust wherever possible.
      </p>

      <h2>Security design principles</h2>
      <ul>
        <li><strong>Encrypt before transport:</strong> Messages are encrypted in the browser before reaching our servers.</li>
        <li><strong>Ciphertext-only storage:</strong> Servers store encrypted envelopes, not readable message content.</li>
        <li><strong>Device-held private keys:</strong> Private keys remain on recipient devices.</li>
        <li><strong>Minimal moving parts:</strong> Calm, deterministic flows reduce complexity and attack surface.</li>
      </ul>

      <h2>Encryption boundary</h2>
      <p>
        Messages sent through <strong>setfeed.app</strong> are encrypted client-side.
        The server receives ciphertext plus required cryptographic metadata (such as IV and salt),
        but not plaintext message content.
      </p>

      <div class="note">
        <p style="margin:0;">
          Private decryption keys are stored only on recipient devices and are never intentionally uploaded to Setfeed servers.
        </p>
      </div>

      <h2>Message flow (high level)</h2>

      <h3>1) Send</h3>
      <ul>
        <li>Message is written in the browser.</li>
        <li>Encryption happens locally using the recipient’s public key.</li>
        <li>Only encrypted ciphertext is transmitted to the server.</li>
      </ul>

      <h3>2) Store</h3>
      <ul>
        <li>Encrypted envelope is stored.</li>
        <li>Consumption state is tracked to prevent replay.</li>
        <li>No plaintext content is stored when encryption is used.</li>
      </ul>

      <h3>3) Receive</h3>
      <ul>
        <li>Recipient device fetches ciphertext.</li>
        <li>Decryption occurs locally on the device.</li>
        <li>Message becomes readable only after successful local decryption.</li>
      </ul>

      <h2>Replay protection</h2>
      <p>
        Envelopes are designed for one-time consumption. Once consumed, the delivery state is updated
        to prevent reuse of the same encrypted payload.
      </p>

      <h2>Integrity and abuse protection</h2>
      <p>
        Setfeed uses Firebase App Check to reduce automated abuse.
        On Android, App Check may use Play Integrity; on the web bridge it may use reCAPTCHA.
        These systems issue short-lived tokens that help verify that requests originate from authentic environments.
      </p>

      <h2>Backend protections</h2>
      <ul>
        <li><strong>Transport encryption (HTTPS/TLS)</strong> for all network communication.</li>
        <li><strong>Access controls</strong> restricting backend administrative access.</li>
        <li><strong>Rate limiting</strong> to reduce automated attacks.</li>
        <li><strong>Operational logging</strong> for reliability and incident response.</li>
      </ul>

      <h2>Limitations</h2>
      <p>
        No system is perfectly secure. While end-to-end encryption reduces server trust requirements,
        security also depends on the integrity of user devices and browsers.
      </p>
      <p>
        If a device is compromised, decrypted content on that device may be exposed.
        Users are encouraged to keep devices updated and secured.
      </p>

      <h2>Responsible disclosure</h2>
      <p>
        If you believe you have found a security vulnerability, please contact
        <a href="mailto:security@setfeed.app">security@setfeed.app</a>.
      </p>
      <p>
        Please include sufficient detail to reproduce the issue. We appreciate responsible disclosure
        and will investigate promptly.
      </p>

      <h2>Relationship to the Privacy Policy</h2>
      <p>
        For details about data processing categories, retention, and third-party providers,
        see the <a href="./privacy.html">Privacy Policy</a>.
      </p>

      <footer>
        <div>© <span id="y"></span> Setfeed</div>
        <div>
          <a href="./privacy.html">Privacy</a>
          <span class="sep">·</span>
          <a href="mailto:security@setfeed.app">security@setfeed.app</a>
        </div>
      </footer>
    </div>
  </div>

  <script>
    document.getElementById("y").textContent = new Date().getFullYear();
  </script>
</body>
</html>
